"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5319],{66280:(e,t,r)=>{r.d(t,{w:()=>n});var s=r(65463),i=r(51499),a=r(20101),c=r(931);let n=async(e,t,r,n)=>{let o=await (0,c.C)(e,r),h=Object.fromEntries(Object.entries(e||{}).sort((e,t)=>{let[r]=e,[s]=t;return r.localeCompare(s)})),l="stories:".concat(JSON.stringify(h));return(0,i.E)(async()=>{let{Storyblok:e}=(0,a.o)(o.version===s.EI.DRAFT,"server",null==n?void 0:n.revalidate);return e.getStories(o,t).catch(()=>s.dp)},l)}},75319:(e,t,r)=>{r.d(t,{rr:()=>c}),r(54568),r(56901);r(44352),r(20101);var s=r(66280);class i{async batchGetStories(e){return new Promise((t,r)=>{this.queue.push({params:e,resolve:t,reject:r}),this.processing||this.scheduleProcessing()})}scheduleProcessing(){this.processing=!0,setTimeout(async()=>{await this.processBatch(),this.processing=!1,this.queue.length>0&&this.scheduleProcessing()},this.batchDelay)}async processBatch(){if(0===this.queue.length)return;let e=this.queue.splice(0,this.maxBatchSize),t=this.groupSimilarRequests(e);for(let e of t)try{await this.processGroup(e),t.indexOf(e)<t.length-1&&await new Promise(e=>setTimeout(e,100))}catch(t){e.forEach(e=>e.reject(t instanceof Error?t:Error(String(t))))}}groupSimilarRequests(e){let t={};return e.forEach(e=>{var r,s;let i="".concat(e.params.starts_with||"","_").concat((null===(s=e.params.filter_query)||void 0===s?void 0:null===(r=s.component)||void 0===r?void 0:r.in)||"");t[i]||(t[i]=[]),t[i].push(e)}),Object.values(t)}async processGroup(e){if(this.areRequestsIdentical(e)){let t=e[0];try{let r=await (0,s.w)(t.params);e.forEach(e=>e.resolve(r))}catch(t){e.forEach(e=>e.reject(t instanceof Error?t:Error(String(t))))}}else for(let t of e)try{let r=await (0,s.w)(t.params);t.resolve(r),e.indexOf(t)<e.length-1&&await new Promise(e=>setTimeout(e,50))}catch(e){t.reject(e instanceof Error?e:Error(String(e)))}}areRequestsIdentical(e){if(e.length<=1)return!0;let t=JSON.stringify(e[0].params);return e.every(e=>JSON.stringify(e.params)===t)}constructor(){this.queue=[],this.processing=!1,this.batchDelay=200,this.maxBatchSize=5}}let a=new i;function c(){return"disable"===new URLSearchParams(window.location.search).get("popup")}r(72695)}}]);
//# sourceMappingURL=5319-9273f23874bbce40.js.map